--- Page 16 ---
Étape 8 : Utiliser l'Image Publiée
8.1 Rendre le package public
1. Aller dans votre Package sur GitHub
2. Cliquer sur Package settings
3. Changer la visibilité en Public
8.2 Pull et run depuis GHCR
docker pull ghcr.io/[username]/devops-tp-docker-[nom]:main
docker run -d -p 8080:80 ghcr.io/[username]/devops-tp-docker-[nom]:main
8.3 Tester
Ouvrir  http://localhost:8080 
Étape 9 : Versioning avec Tags
9.1 Créer un tag Git
git tag -a v1.0.0 -m "Version 1.0.0"
git push origin v1.0.0
9.2 Observer le workﬂow
Le workﬂow se déclenche automatiquement et crée :
Image avec tag  v1.0.0 
Image avec tag  1.0 
Image avec tag  latest 
9.3 Pull une version spéciﬁque
docker pull ghcr.io/[username]/devops-tp-docker-[nom]:v1.0.0
--- Page 17 ---
Étape 10 : Optimisation de l'Image
10.1 Vériﬁer la taille de l'image
docker images | grep devops-tp-docker
10.2 Analyser les layers
docker history devops-tp-docker:latest
10.3 Dockerﬁle optimisé (optionnel)
FROM nginx:alpine
# Métadonnées
LABEL maintainer="TP DevOps"
LABEL description="Application DevOps optimisée"
# Copier en une seule couche
COPY nginx/nginx.conf /etc/nginx/conf.d/default.conf
COPY src/ /usr/share/nginx/html/
# Supprimer les fichiers inutiles
RUN rm -rf /usr/share/nginx/html/*.md
EXPOSE 80
HEALTHCHECK --interval=30s --timeout=3s     CMD wget -q --spider http://localhost/ || e
CMD ["nginx", "-g", "daemon off;"]
Résultats Attendus
À la ﬁn de ce TP, vous devez avoir :
Infrastructure Docker :
Application web conteneurisée avec Nginx
Dockerﬁle optimisé et fonctionnel
--- Page 18 ---
Image Docker publiée sur GHCR
Versioning automatique des images
Pipeline CI/CD :
Build automatique à chaque push
Push automatique vers GHCR
Tags Git créent des versions d'images
Cache optimisé pour build rapides
Compétences acquises :
Conteneurisation d'applications web
Conﬁguration Nginx dans Docker
GitHub Container Registry
GitHub Actions pour Docker
Bonnes pratiques Docker
--- Page 19 ---
Commandes Docker Utiles
# Lister les images
docker images
# Lister les containers
docker ps -a
# Logs d'un container
docker logs [container-id]
# Exécuter une commande dans un container
docker exec -it [container-id] sh
# Arrêter tous les containers
docker stop $(docker ps -q)
# Supprimer tous les containers
docker rm $(docker ps -aq)
# Nettoyer les images non utilisées
docker image prune -a
# Voir l'utilisation disque
docker system df

